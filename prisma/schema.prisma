generator client {
  provider = "prisma-client-js"
}


datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


enum Operation {
  venta
  alquiler
  compartir
}

enum PropertyType {
  Piso
  Casa
  Chalet
  Atico
  Estudio
  Local
  Parcela
  Otro
}

model Listing {
  id          String   @id @default(cuid())
  title       String?
  description String?  @db.Text

  // Ubicación
  address     String?
  city        String?
  province    String?
  zip         String?
  lat         Float?
  lng         Float?

  // Datos
  type        PropertyType?
  condition   String?
  price       Int
  priceHidden  Boolean? @default(false)
  communityFees Int?
  bedrooms    Int?
  bathrooms   Int?
  areaM2      Int?
  yearBuilt   Int?

  // Operación
  operation   Operation? @default(venta)

  // Extras
  extras      Json?

  // Multimedia
  coverUrl    String?
  images      Image[]

  // Energía
  energyLabel        String?
  energyConsumption  Int?
  energyEmissions    Int?

  // Contacto
  reference     String?
  contactEmail  String?
  contactPhone  String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([createdAt])
  @@index([price])
  @@index([city])
  @@index([bedrooms])
  @@index([bathrooms])
  @@index([areaM2])
}

model Image {
  id         String   @id @default(cuid())
  url        String
  listingId  String
  listing    Listing  @relation(fields: [listingId], references: [id])
  createdAt  DateTime @default(now())
}


